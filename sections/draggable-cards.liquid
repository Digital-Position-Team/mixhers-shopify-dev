<style>
  .draggable-cards {
    padding: 80px 20px;
    font-family: 'Buenos Aires', sans-serif;
    background-color: #f9f9f9;
  }
  
  .draggable-cards__header {
    text-align: center;
    max-width: 800px;
    margin: 0 auto 40px;
  }
  
  .draggable-cards__title {
    font-family: 'Faire Sprig', serif;
    font-size: 36px;
    margin-bottom: 20px;
    line-height: 1.2;
  }

  #product-categories-carousel {
    width: 100%;
    height: 100%;
    overflow: visible;
  }

  #product-categories-carousel .swiper-slide {
    width: 330px;
    height: 455px;
    transition: transform 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    border-radius: 16px;
    overflow: hidden;
  }

  #product-categories-carousel .swiper-slide img {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 16px;
  }

  #product-categories-carousel .swiper-slide-active {
    transform: scale(1.1);
    z-index: 1;
  }

  .title-text {
    position: absolute;
    bottom: 110px;
    left: 20px;
    color: white;
    font-weight: bold;
    font-size: 30px;
    line-height: 30px;
    transition: transform 0.3s ease-in-out;
  }

  .shop-now {
    position: absolute;
    bottom: 110px;
    left: 20px;
    opacity: 0;
    transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
    transform: translateY(12px);
  }

  /* Mobile styles */
  @media (max-width: 768px) {
    #product-categories-carousel .swiper-slide-active .shop-now {
      opacity: 1;
      transform: translateY(0);
    }
    
    #product-categories-carousel .swiper-slide-active .title-text {
      transform: translateY(-44px);
    }
  }

  /* Desktop hover styles */
  @media (min-width: 769px) {
    .swiper-slide:hover .shop-now {
      opacity: 1;
      transform: translateY(0);
    }

    .swiper-slide:hover .title-text {
      transform: translateY(-44px);
    }
  }

  .draggable-cards__footer {
    text-align: center;
    margin-top: 40px;
  }
</style>

<div class="draggable-cards">
  <div class="page-width">
    <div class="draggable-cards__header">
      <h2 class="draggable-cards__title">{{ section.settings.title }}</h2>
    </div>
    
    <div class="swiper" id="product-categories-carousel">
      <div class="swiper-wrapper">
        {% for block in section.blocks %}
          <div class="swiper-slide" {{ block.shopify_attributes }}>
            {% if block.settings.bg_image != blank %}
              <img 
                src="{{ block.settings.bg_image | image_url: width: 600 }}" 
                alt="{{ block.settings.title }}" 
                loading="lazy"
                width="330"
                height="414"
              >
            {% endif %}
            <div class="title-text">{{ block.settings.title }}</div>
            <div class="shop-now">
              <a href="{{ block.settings.cta_link }}">
                <button class="btn btn-pink">{{ block.settings.cta_text }}</button>
              </a>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>
    
    <div class="draggable-cards__footer">
      <a href="{{ section.settings.cta_link }}" class="btn btn-pink">{{ section.settings.cta_text }}</a>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const swiper = new Swiper('#product-categories-carousel', {
      spaceBetween: 30,
      slidesPerView: 1.5,
      centeredSlides: true,
      loop: true,
      grabCursor: true,
      breakpoints: {
        480: {
          slidesPerView: 'auto',
        },
      },
    });
    
    // Add event listeners for hover and touch events
    const slides = document.querySelectorAll('.swiper-slide');

    slides.forEach(slide => {
      // Handle hover for desktop
      slide.addEventListener('mouseenter', () => {
        showHoverEffect(slide);
      });
      slide.addEventListener('mouseleave', () => {
        hideHoverEffect(slide);
      });

      // Handle touch for mobile
      slide.addEventListener('touchstart', () => {
        showHoverEffect(slide);
      });
    });

    // Function to show hover effect
    function showHoverEffect(slide) {
      const titleText = slide.querySelector('.title-text');
      const shopNow = slide.querySelector('.shop-now');
      
      if (window.innerWidth > 768) {
        titleText.style.transform = 'translateY(-44px)';
        shopNow.style.opacity = '1';
        shopNow.style.transform = 'translateY(0)';
      }
    }

    // Function to hide hover effect
    function hideHoverEffect(slide) {
      const titleText = slide.querySelector('.title-text');
      const shopNow = slide.querySelector('.shop-now');
      
      if (window.innerWidth > 768) {
        titleText.style.transform = 'translateY(0)';
        shopNow.style.opacity = '0';
        shopNow.style.transform = 'translateY(12px)';
      }
    }
  });
</script>

{% schema %}
{
  "name": "Draggable Cards",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Section Title",
      "default": "Hormone-friendly support for every stage of womanhood"
    },
    {
      "type": "text",
      "id": "cta_text",
      "label": "CTA Button Text",
      "default": "Shop All Stages"
    },
    {
      "type": "url",
      "id": "cta_link",
      "label": "CTA Button Link"
    }
  ],
  "blocks": [
    {
      "type": "card",
      "name": "Card",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Card Title",
          "default": "Card Title"
        },
        {
          "type": "image_picker",
          "id": "bg_image",
          "label": "Background Image"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Description",
          "default": "Short description about this specific card and its benefits."
        },
        {
          "type": "text",
          "id": "cta_text",
          "label": "Button Text",
          "default": "Shop Now"
        },
        {
          "type": "url",
          "id": "cta_link",
          "label": "Button Link"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Draggable Cards",
      "blocks": [
        {
          "type": "card"
        },
        {
          "type": "card"
        },
        {
          "type": "card"
        }
      ]
    }
  ]
}
{% endschema %}
