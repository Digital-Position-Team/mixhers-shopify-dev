
{% for option in product.options %}
    {% if option == 'Size' %}
        {% for variant in product.variants %}
            {% if variant.metafields.custom.bubble.value.size == 1 %}
                .{{ product.handle }} .product--size-select--item[data-name="{{ variant.option1 }}"]:before,
                .{{ product.handle }} .select-items div[data-name="{{ variant.option1 }}"]:before {
                    background: {{ variant.metafields.custom.bubble.value }};
                }
            {% elsif variant.metafields.custom.bubble.value.size == 2 %}
                .{{ product.handle }} .product--size-select--item[data-name="{{ variant.option1 }}"]:before,
                .{{ product.handle }} .select-items div[data-name="{{ variant.option1 }}"]:before {
                    background: linear-gradient(to right, {{ variant.metafields.custom.bubble.value[0] }} 50%, {{ variant.metafields.custom.bubble.value[1] }} 50%);
                }
                {% elsif variant.metafields.custom.bubble.value.size == 3 %}
                .{{ product.handle }} .product--size-select--item[data-name="{{ variant.option1 }}"]:before,
                .{{ product.handle }} .select-items div[data-name="{{ variant.option1 }}"]:before {
                    background: conic-gradient(from 60deg at center, {{ variant.metafields.custom.bubble.value[0] }} 0 33.3%, {{ variant.metafields.custom.bubble.value[1] }} 0 66.6%, {{ variant.metafields.custom.bubble.value[2] }} 0 99.9%);
                }
            {% endif %}
        {% endfor %}
    {% elsif option == 'Product' %}
        {% for variant in product.variants %}
            {% if variant.metafields.custom.bubble.value.size == 1 %}
                .{{ product.handle }} .product--size-select--item[data-name="{{ variant.option1 }}"]:before,
                .{{ product.handle }} .select-items div[data-name="{{ variant.option1 }}"]:before {
                    background: {{ variant.metafields.custom.bubble.value }};
                }
            {% elsif variant.metafields.custom.bubble.value.size == 2 %}
                .{{ product.handle }} .product--size-select--item[data-name="{{ variant.option1 }}"]:before,
                .{{ product.handle }} .select-items div[data-name="{{ variant.option1 }}"]:before {
                    background: linear-gradient(to right, {{ variant.metafields.custom.bubble.value[0] }} 50%, {{ variant.metafields.custom.bubble.value[1] }} 50%);
                }
                {% elsif variant.metafields.custom.bubble.value.size == 3 %}
                .{{ product.handle }} .product--size-select--item[data-name="{{ variant.option1 }}"]:before,
                .{{ product.handle }} .select-items div[data-name="{{ variant.option1 }}"]:before {
                    background: conic-gradient(from 60deg at center, {{ variant.metafields.custom.bubble.value[0] }} 0 33.3%, {{ variant.metafields.custom.bubble.value[1] }} 0 66.6%, {{ variant.metafields.custom.bubble.value[2] }} 0 99.9%);
                }
            {% endif %}
        {% endfor %}
    {% else %}
        {% for variant in product.variants %}
            {% if variant.metafields.custom.bubble.value.size == 1 %}
                .{{ product.handle }} .select-selected[data-name="{{ variant.option1 }}"]:before,
                .{{ product.handle }} .select-items div[data-name="{{ variant.option1 }}"]:before {
                    background: {{ variant.metafields.custom.bubble.value }};
                }
            {% elsif variant.metafields.custom.bubble.value.size == 2 %}
                .{{ product.handle }} .select-selected[data-name="{{ variant.option1 }}"]:before,
                .{{ product.handle }} .select-items div[data-name="{{ variant.option1 }}"]:before {
                    background: linear-gradient(to right, {{ variant.metafields.custom.bubble.value[0] }} 50%, {{ variant.metafields.custom.bubble.value[1] }} 50%);
                }
            {% elsif variant.metafields.custom.bubble.value.size == 3 %}
                .{{ product.handle }} .select-selected[data-name="{{ variant.option1 }}"]:before,
                .{{ product.handle }} .select-items div[data-name="{{ variant.option1 }}"]:before {
                    background: conic-gradient(from 60deg at center, {{ variant.metafields.custom.bubble.value[0] }} 0 33.3%, {{ variant.metafields.custom.bubble.value[1] }} 0 66.6%, {{ variant.metafields.custom.bubble.value[2] }} 0 99.9%);
                }
            {% endif %}
        {% endfor %}
    {% endif %}
{% endfor %}